# ğŸŒ ××¨×›×™×˜×§×˜×•×¨×” ×’×œ×•×‘×œ×™×ª - Gogobe Worldwide

## ×ª××¨×™×š: 21 ×“×¦××‘×¨ 2025
## ×—×–×•×Ÿ: ×¤×œ×˜×¤×•×¨××ª ×”×©×•×•××ª ××—×™×¨×™× ×‘×™× ×œ××•××™×ª ×‘×¡×“×¨ ×’×•×“×œ ×©×œ Google

---

## ğŸ¯ ×”×—×–×•×Ÿ

**Gogobe Global** - ×¤×œ×˜×¤×•×¨××” ×¢×•×œ××™×ª ×œ×”×©×•×•××ª ××—×™×¨×™×:
- ğŸŒ **Multi-Region** - ×©×¨×ª×™× ×‘×›×œ ×™×‘×©×ª
- ğŸ—„ï¸ **Multi-Database** - DB × ×¤×¨×“ ×œ×›×œ ××–×•×¨/domain
- ğŸš€ **Massive Scale** - ××™×œ×™××¨×“×™ ××•×¦×¨×™×, ××™×œ×™×•× ×™ ××©×ª××©×™×
- âš¡ **Low Latency** - <100ms ×‘×›×œ ××§×•× ×‘×¢×•×œ×
- ğŸ’° **Multi-Currency** - ×ª××™×›×” ×‘×›×œ ××˜×‘×¢×•×ª ×”×¢×•×œ×

---

## ğŸ—ºï¸ ××¨×›×™×˜×§×˜×•×¨×” ×’×™××•×’×¨×¤×™×ª

### ××–×•×¨×™× ×’×œ×•×‘×œ×™×™× (Regions)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Global Architecture                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸŒ EMEA (Europe, Middle East, Africa)
â”œâ”€ Israel Region (IL)
â”‚  â”œâ”€ DB: gogobe_il (PostgreSQL)
â”‚  â”œâ”€ Cache: Redis IL
â”‚  â”œâ”€ Services: Import, Product, Price
â”‚  â””â”€ Data: ×¨××™ ×œ×•×™, ×©×•×¤×¨×¡×œ, ×™×™× ×•×ª ×‘×™×ª×Ÿ...
â”‚
â”œâ”€ Europe Region (EU)
â”‚  â”œâ”€ DB: gogobe_eu (PostgreSQL)
â”‚  â”œâ”€ Cache: Redis EU
â”‚  â”œâ”€ Services: Import, Product, Price
â”‚  â””â”€ Data: Tesco, Carrefour, Lidl...
â”‚
â””â”€ Middle East Region (ME)
   â”œâ”€ DB: gogobe_me (PostgreSQL)
   â””â”€ Data: Dubai, Saudi Arabia...

ğŸŒ Americas
â”œâ”€ US East Region (US-EAST)
â”‚  â”œâ”€ DB: gogobe_us_east (PostgreSQL)
â”‚  â”œâ”€ Cache: Redis US-EAST
â”‚  â”œâ”€ Services: Import, Product, Price
â”‚  â””â”€ Data: Walmart, Target, Whole Foods...
â”‚
â”œâ”€ US West Region (US-WEST)
â”‚  â”œâ”€ DB: gogobe_us_west (PostgreSQL)
â”‚  â””â”€ Data: Safeway, Kroger...
â”‚
â””â”€ Latin America Region (LATAM)
   â”œâ”€ DB: gogobe_latam (PostgreSQL)
   â””â”€ Data: Brazil, Mexico, Argentina...

ğŸŒ Asia-Pacific (APAC)
â”œâ”€ Asia Region (ASIA)
â”‚  â”œâ”€ DB: gogobe_asia (PostgreSQL)
â”‚  â””â”€ Data: China, Japan, Korea...
â”‚
â””â”€ Australia Region (AU)
   â”œâ”€ DB: gogobe_au (PostgreSQL)
   â””â”€ Data: Woolworths, Coles...
```

---

## ğŸ—„ï¸ ××¡×˜×¨×˜×’×™×™×ª ×‘×¡×™×¡×™ × ×ª×•× ×™×

### ××¤×©×¨×•×ª 1: **Database per Region** (××•××œ×¥!)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Israel Region (Tel Aviv)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL: gogobe_il                                       â”‚
â”‚ â”œâ”€ Schema: public                                           â”‚
â”‚ â”‚  â”œâ”€ store_chains (×¨××™ ×œ×•×™, ×©×•×¤×¨×¡×œ...)                    â”‚
â”‚ â”‚  â”œâ”€ stores (×¡× ×™×¤×™× ×‘×™×©×¨××œ)                               â”‚
â”‚ â”‚  â”œâ”€ products (××•×¦×¨×™× ×‘×™×©×¨××œ)                             â”‚
â”‚ â”‚  â”œâ”€ prices (××—×™×¨×™× ×‘×©×§×œ×™×)                               â”‚
â”‚ â”‚  â””â”€ master_products (××‘ ××•×¦×¨×™× - ×’×œ×•×‘×œ×™!)               â”‚
â”‚ â”‚                                                            â”‚
â”‚ â”œâ”€ Schema: analytics                                        â”‚
â”‚ â”‚  â”œâ”€ price_history                                         â”‚
â”‚ â”‚  â””â”€ user_searches                                         â”‚
â”‚ â”‚                                                            â”‚
â”‚ â””â”€ Schema: cache                                            â”‚
â”‚    â””â”€ materialized_views                                    â”‚
â”‚                                                              â”‚
â”‚ Size: ~500GB (10M products Ã— 100M prices)                   â”‚
â”‚ Location: AWS eu-south-1 (Tel Aviv)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ US East Region (Virginia)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL: gogobe_us_east                                  â”‚
â”‚ â”œâ”€ Schema: public                                           â”‚
â”‚ â”‚  â”œâ”€ store_chains (Walmart, Target...)                    â”‚
â”‚ â”‚  â”œâ”€ stores (×¡× ×™×¤×™× ×‘××¨×”"×‘)                               â”‚
â”‚ â”‚  â”œâ”€ products (××•×¦×¨×™× ×‘××¨×”"×‘)                             â”‚
â”‚ â”‚  â”œâ”€ prices (××—×™×¨×™× ×‘×“×•×œ×¨×™×)                              â”‚
â”‚ â”‚  â””â”€ master_products (××‘ ××•×¦×¨×™× - ×’×œ×•×‘×œ×™!)               â”‚
â”‚ â”‚                                                            â”‚
â”‚ Size: ~5TB (100M products Ã— 1B prices)                      â”‚
â”‚ Location: AWS us-east-1 (Virginia)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Global Master Database (Multi-Region)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL: gogobe_global (Replicated)                      â”‚
â”‚ â”œâ”€ master_products (×§×˜×œ×•×’ ×’×œ×•×‘×œ×™)                          â”‚
â”‚ â”œâ”€ categories (×§×˜×’×•×¨×™×•×ª ×’×œ×•×‘×œ×™×•×ª)                          â”‚
â”‚ â”œâ”€ brands (××•×ª×’×™× ×’×œ×•×‘×œ×™×™×)                                â”‚
â”‚ â”œâ”€ users (××©×ª××©×™× ×’×œ×•×‘×œ×™×™×)                                â”‚
â”‚ â””â”€ region_mapping (××™×¤×•×™ ××–×•×¨×™×)                           â”‚
â”‚                                                              â”‚
â”‚ Replication: Multi-Master (CockroachDB / YugabyteDB)       â”‚
â”‚ Size: ~100GB                                                â”‚
â”‚ Locations: IL, US-EAST, EU, ASIA                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ××¤×©×¨×•×ª 2: **Schema per Domain** (×‘××•×ª×• DB)

```sql
-- Single PostgreSQL instance, multiple schemas

-- Israel Domain
CREATE SCHEMA il;
CREATE TABLE il.store_chains (...);
CREATE TABLE il.stores (...);
CREATE TABLE il.products (...);
CREATE TABLE il.prices (...);

-- US Domain
CREATE SCHEMA us;
CREATE TABLE us.store_chains (...);
CREATE TABLE us.stores (...);
CREATE TABLE us.products (...);
CREATE TABLE us.prices (...);

-- EU Domain
CREATE SCHEMA eu;
CREATE TABLE eu.store_chains (...);
CREATE TABLE eu.stores (...);
CREATE TABLE eu.products (...);
CREATE TABLE eu.prices (...);

-- Global Domain (shared)
CREATE SCHEMA global;
CREATE TABLE global.master_products (...);
CREATE TABLE global.categories (...);
CREATE TABLE global.brands (...);
CREATE TABLE global.users (...);
```

**×™×ª×¨×•× ×•×ª:**
- âœ… × ×™×”×•×œ ×¤×©×•×˜ ×™×•×ª×¨ (DB ××—×“)
- âœ… Joins ×‘×™×Ÿ schemas ××¤×©×¨×™×™×
- âœ… Backup ××—×“

**×—×¡×¨×•× ×•×ª:**
- âŒ ×œ× × ×™×ª×Ÿ ×œ×”×¤×¨×™×“ ×’×™××•×’×¨×¤×™×ª
- âŒ Single point of failure
- âŒ ×§×©×” ×œ-scale

### ××¤×©×¨×•×ª 3: **Database per Service** (Microservices Pattern)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Product Service                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL: products_db                                     â”‚
â”‚ â”œâ”€ products                                                 â”‚
â”‚ â”œâ”€ product_attributes                                       â”‚
â”‚ â””â”€ product_images                                           â”‚
â”‚                                                              â”‚
â”‚ Sharding: By product_id hash                                â”‚
â”‚ Replicas: 3 (IL, US, EU)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Price Service                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TimescaleDB: prices_db (time-series optimized)             â”‚
â”‚ â”œâ”€ prices (hypertable)                                      â”‚
â”‚ â”œâ”€ price_history                                            â”‚
â”‚ â””â”€ price_alerts                                             â”‚
â”‚                                                              â”‚
â”‚ Partitioning: By time (monthly) + region                   â”‚
â”‚ Retention: 2 years                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Store Service                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL + PostGIS: stores_db                             â”‚
â”‚ â”œâ”€ store_chains                                             â”‚
â”‚ â”œâ”€ stores (with geom column)                                â”‚
â”‚ â””â”€ store_hours                                              â”‚
â”‚                                                              â”‚
â”‚ Sharding: By region                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Service                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL: users_db                                        â”‚
â”‚ â”œâ”€ users                                                    â”‚
â”‚ â”œâ”€ user_preferences                                         â”‚
â”‚ â””â”€ user_searches                                            â”‚
â”‚                                                              â”‚
â”‚ Replication: Global (CockroachDB)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analytics Service                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ClickHouse: analytics_db (OLAP)                             â”‚
â”‚ â”œâ”€ events (billions of rows)                                â”‚
â”‚ â”œâ”€ price_trends                                             â”‚
â”‚ â””â”€ user_behavior                                            â”‚
â”‚                                                              â”‚
â”‚ Partitioning: By date                                       â”‚
â”‚ Compression: 10:1 ratio                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ ××¨×›×™×˜×§×˜×•×¨×” ××œ××” - Global Scale

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Global Load Balancer   â”‚
                    â”‚   (Cloudflare / AWS)     â”‚
                    â”‚   - GeoDNS               â”‚
                    â”‚   - DDoS Protection      â”‚
                    â”‚   - CDN                  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                â”‚                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
        â”‚ IL Region    â”‚  â”‚ US Region  â”‚  â”‚ EU Region  â”‚
        â”‚ (Tel Aviv)   â”‚  â”‚ (Virginia) â”‚  â”‚ (Frankfurt)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                â”‚                â”‚                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
        â”‚         Regional API Gateway (Kong)            â”‚
        â”‚         - Authentication (JWT)                 â”‚
        â”‚         - Rate Limiting (per user/IP)          â”‚
        â”‚         - Request Routing                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Message Broker (Kafka / NATS)              â”‚
        â”‚   - Multi-Region Replication                 â”‚
        â”‚   - Exactly-once delivery                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚           â”‚          â”‚          â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚Product â”‚ â”‚Price   â”‚ â”‚Store   â”‚ â”‚User    â”‚ â”‚Import  â”‚
â”‚Service â”‚ â”‚Service â”‚ â”‚Service â”‚ â”‚Service â”‚ â”‚Service â”‚
â”‚(Go)    â”‚ â”‚(Go)    â”‚ â”‚(Go)    â”‚ â”‚(Python)â”‚ â”‚(Go)    â”‚
â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚        â”‚
â”‚Scale:  â”‚ â”‚Scale:  â”‚ â”‚Scale:  â”‚ â”‚Scale:  â”‚ â”‚Scale:  â”‚
â”‚10-100  â”‚ â”‚10-100  â”‚ â”‚5-50    â”‚ â”‚5-50    â”‚ â”‚0-20    â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚          â”‚           â”‚          â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redis Cluster  â”‚  â”‚ PostgreSQL  â”‚  â”‚ ClickHouse     â”‚
â”‚ (Cache)        â”‚  â”‚ (OLTP)      â”‚  â”‚ (Analytics)    â”‚
â”‚                â”‚  â”‚             â”‚  â”‚                â”‚
â”‚ - Products     â”‚  â”‚ - Products  â”‚  â”‚ - Events       â”‚
â”‚ - Prices       â”‚  â”‚ - Prices    â”‚  â”‚ - Trends       â”‚
â”‚ - Stores       â”‚  â”‚ - Stores    â”‚  â”‚ - Aggregates   â”‚
â”‚                â”‚  â”‚             â”‚  â”‚                â”‚
â”‚ Sharding: 16   â”‚  â”‚ Sharding: 8 â”‚  â”‚ Partitions:    â”‚
â”‚ nodes          â”‚  â”‚ nodes       â”‚  â”‚ 365 (daily)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”€ Database Sharding Strategy

### Sharding by Region + Hash

```python
# shard_router.py
class ShardRouter:
    """
    Routes database queries to the correct shard
    based on region and entity ID
    """
    
    REGIONS = {
        'IL': {
            'db_host': 'postgres-il.gogobe.com',
            'shards': 4,  # 4 shards for Israel
        },
        'US': {
            'db_host': 'postgres-us.gogobe.com',
            'shards': 16,  # 16 shards for US (bigger)
        },
        'EU': {
            'db_host': 'postgres-eu.gogobe.com',
            'shards': 8,  # 8 shards for EU
        },
    }
    
    def get_shard(self, region: str, entity_id: int) -> str:
        """
        Calculate shard number based on entity ID
        
        Example:
        - Product ID: 123456 in IL â†’ Shard 0 (123456 % 4 = 0)
        - Product ID: 789012 in US â†’ Shard 12 (789012 % 16 = 12)
        """
        region_config = self.REGIONS[region]
        shard_num = entity_id % region_config['shards']
        
        return f"{region_config['db_host']}/gogobe_shard_{shard_num}"
    
    def get_connection(self, region: str, entity_id: int):
        """Get database connection for specific shard"""
        shard_url = self.get_shard(region, entity_id)
        return psycopg2.connect(shard_url)

# Usage
router = ShardRouter()

# Insert product in Israel
product_id = 123456
conn = router.get_connection('IL', product_id)
cursor = conn.cursor()
cursor.execute("""
    INSERT INTO products (id, name, ean, ...)
    VALUES (%s, %s, %s, ...)
""", (product_id, "×—×œ×‘ ×ª× ×•×‘×”", "7290000000001", ...))

# Query product in US
product_id = 789012
conn = router.get_connection('US', product_id)
cursor = conn.cursor()
cursor.execute("""
    SELECT * FROM products WHERE id = %s
""", (product_id,))
```

### Consistent Hashing (Advanced)

```go
// consistent_hash.go
package sharding

import (
    "hash/crc32"
    "sort"
)

type ConsistentHash struct {
    circle map[uint32]string
    nodes  []uint32
}

func NewConsistentHash() *ConsistentHash {
    return &ConsistentHash{
        circle: make(map[uint32]string),
        nodes:  []uint32{},
    }
}

func (ch *ConsistentHash) AddNode(node string, replicas int) {
    // Add virtual nodes for better distribution
    for i := 0; i < replicas; i++ {
        hash := crc32.ChecksumIEEE([]byte(fmt.Sprintf("%s:%d", node, i)))
        ch.circle[hash] = node
        ch.nodes = append(ch.nodes, hash)
    }
    sort.Slice(ch.nodes, func(i, j int) bool {
        return ch.nodes[i] < ch.nodes[j]
    })
}

func (ch *ConsistentHash) GetNode(key string) string {
    hash := crc32.ChecksumIEEE([]byte(key))
    
    // Find first node >= hash
    idx := sort.Search(len(ch.nodes), func(i int) bool {
        return ch.nodes[i] >= hash
    })
    
    if idx == len(ch.nodes) {
        idx = 0  // Wrap around
    }
    
    return ch.circle[ch.nodes[idx]]
}

// Usage
ch := NewConsistentHash()
ch.AddNode("postgres-il-shard-0", 100)
ch.AddNode("postgres-il-shard-1", 100)
ch.AddNode("postgres-il-shard-2", 100)
ch.AddNode("postgres-il-shard-3", 100)

// Get shard for product
shard := ch.GetNode("product:123456")  // â†’ "postgres-il-shard-2"
```

---

## ğŸŒ Multi-Currency Support

### Currency Table

```sql
-- Global schema
CREATE TABLE global.currencies (
    code CHAR(3) PRIMARY KEY,  -- ISO 4217
    name VARCHAR(100),
    symbol VARCHAR(10),
    decimal_places INT DEFAULT 2,
    is_active BOOLEAN DEFAULT TRUE
);

INSERT INTO global.currencies VALUES
('ILS', 'Israeli Shekel', 'â‚ª', 2, TRUE),
('USD', 'US Dollar', '$', 2, TRUE),
('EUR', 'Euro', 'â‚¬', 2, TRUE),
('GBP', 'British Pound', 'Â£', 2, TRUE),
('JPY', 'Japanese Yen', 'Â¥', 0, TRUE);

-- Exchange rates (updated daily)
CREATE TABLE global.exchange_rates (
    id BIGSERIAL PRIMARY KEY,
    from_currency CHAR(3) REFERENCES global.currencies(code),
    to_currency CHAR(3) REFERENCES global.currencies(code),
    rate DECIMAL(18, 6),
    effective_date DATE DEFAULT CURRENT_DATE,
    source VARCHAR(50),  -- 'ECB', 'Bank of Israel', etc.
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_exchange_rates_lookup 
ON global.exchange_rates(from_currency, to_currency, effective_date DESC);

-- Example data
INSERT INTO global.exchange_rates (from_currency, to_currency, rate, source) VALUES
('USD', 'ILS', 3.65, 'Bank of Israel'),
('EUR', 'ILS', 4.05, 'Bank of Israel'),
('ILS', 'USD', 0.274, 'Bank of Israel'),
('USD', 'EUR', 0.92, 'ECB');
```

### Price Conversion Service

```go
// currency_service.go
package currency

type CurrencyService struct {
    redis *redis.Client
    db    *sql.DB
}

func (cs *CurrencyService) ConvertPrice(
    amount float64,
    fromCurrency string,
    toCurrency string,
) (float64, error) {
    // 1. Check cache first
    cacheKey := fmt.Sprintf("rate:%s:%s", fromCurrency, toCurrency)
    cached, err := cs.redis.Get(ctx, cacheKey).Float64()
    if err == nil {
        return amount * cached, nil
    }
    
    // 2. Query database
    var rate float64
    err = cs.db.QueryRow(`
        SELECT rate 
        FROM global.exchange_rates
        WHERE from_currency = $1 
          AND to_currency = $2
          AND effective_date = CURRENT_DATE
        LIMIT 1
    `, fromCurrency, toCurrency).Scan(&rate)
    
    if err != nil {
        return 0, err
    }
    
    // 3. Cache for 1 hour
    cs.redis.Set(ctx, cacheKey, rate, 1*time.Hour)
    
    return amount * rate, nil
}

// Usage in Price Service
func (ps *PriceService) GetPriceInCurrency(
    productID int,
    targetCurrency string,
) (*Price, error) {
    // Get original price
    price := ps.GetPrice(productID)
    
    // Convert if needed
    if price.Currency != targetCurrency {
        converted, _ := ps.currencyService.ConvertPrice(
            price.Amount,
            price.Currency,
            targetCurrency,
        )
        price.Amount = converted
        price.Currency = targetCurrency
    }
    
    return price, nil
}
```

---

## ğŸ“Š Data Replication Strategy

### Master Products - Multi-Master Replication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CockroachDB / YugabyteDB (Distributed SQL)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ Node 1 (IL)          Node 2 (US)          Node 3 (EU)       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ master_  â”‚â—„â”€â”€â”€â”€â”€â”€â–ºâ”‚ master_  â”‚â—„â”€â”€â”€â”€â”€â”€â–ºâ”‚ master_  â”‚       â”‚
â”‚ â”‚ products â”‚        â”‚ products â”‚        â”‚ products â”‚       â”‚
â”‚ â”‚          â”‚        â”‚          â”‚        â”‚          â”‚       â”‚
â”‚ â”‚ Replica  â”‚        â”‚ Replica  â”‚        â”‚ Replica  â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                              â”‚
â”‚ Write anywhere, read anywhere                               â”‚
â”‚ Consensus: Raft protocol                                    â”‚
â”‚ Consistency: Strong (linearizable)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Regional Data - Master-Slave Replication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Israel Region                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Master (Read/Write)                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚ â”‚ postgres-il-main â”‚                                        â”‚
â”‚ â”‚ - products       â”‚                                        â”‚
â”‚ â”‚ - prices         â”‚                                        â”‚
â”‚ â”‚ - stores         â”‚                                        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                   â”‚
â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Replica 1 (Read-only, Tel Aviv)       â”‚
â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Replica 2 (Read-only, Jerusalem)      â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Replica 3 (Read-only, Haifa)          â”‚
â”‚                                                              â”‚
â”‚ Replication: Streaming (PostgreSQL native)                  â”‚
â”‚ Lag: <1 second                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Deployment Architecture

### Kubernetes Multi-Cluster

```yaml
# Global deployment across regions
apiVersion: v1
kind: ConfigMap
metadata:
  name: gogobe-config
data:
  REGION: "IL"
  DB_SHARD_COUNT: "4"
  KAFKA_BROKERS: "kafka-il-1:9092,kafka-il-2:9092,kafka-il-3:9092"
  REDIS_CLUSTER: "redis-il-cluster:6379"
  
---
# Product Service - deployed in all regions
apiVersion: apps/v1
kind: Deployment
metadata:
  name: product-service
  namespace: gogobe-il
spec:
  replicas: 10  # IL: 10, US: 50, EU: 20
  selector:
    matchLabels:
      app: product-service
      region: il
  template:
    metadata:
      labels:
        app: product-service
        region: il
    spec:
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
          - labelSelector:
              matchExpressions:
              - key: app
                operator: In
                values:
                - product-service
            topologyKey: kubernetes.io/hostname
      containers:
      - name: product-service
        image: gogobe/product-service:v2.0
        env:
        - name: REGION
          valueFrom:
            configMapKeyRef:
              name: gogobe-config
              key: REGION
        resources:
          requests:
            cpu: 500m
            memory: 1Gi
          limits:
            cpu: 2000m
            memory: 4Gi
```

---

## ğŸ“ˆ Capacity Planning

### Expected Scale (5 years)

| Metric | Israel | USA | Europe | Global |
|--------|--------|-----|--------|--------|
| **Products** | 10M | 100M | 50M | 200M |
| **Prices** | 100M | 1B | 500M | 2B |
| **Stores** | 10K | 100K | 50K | 200K |
| **Users** | 1M | 50M | 20M | 100M |
| **Requests/sec** | 1K | 50K | 20K | 100K |
| **DB Size** | 500GB | 5TB | 2TB | 10TB |
| **Cache Size** | 50GB | 500GB | 200GB | 1TB |

### Infrastructure Costs (Monthly)

| Region | Compute | Database | Cache | Storage | Total |
|--------|---------|----------|-------|---------|-------|
| **IL** | $2K | $1K | $500 | $200 | **$3.7K** |
| **US** | $20K | $10K | $5K | $2K | **$37K** |
| **EU** | $10K | $5K | $2.5K | $1K | **$18.5K** |
| **Global** | $5K | $2K | $1K | $500 | **$8.5K** |
| **TOTAL** | $37K | $18K | $9K | $3.7K | **$67.7K/mo** |

---

## ğŸ¯ Implementation Roadmap

### Phase 1: Israel Only (Months 1-3)
- âœ… Single region (IL)
- âœ… Single database
- âœ… Basic microservices
- âœ… Redis cache
- âœ… Kafka messaging

### Phase 2: Multi-Schema (Months 4-6)
- âœ… Add US schema
- âœ… Add EU schema
- âœ… Currency conversion
- âœ… Shard router

### Phase 3: Multi-Region (Months 7-12)
- âœ… Deploy US region
- âœ… Deploy EU region
- âœ… Global load balancer
- âœ… Cross-region replication

### Phase 4: Global Scale (Year 2)
- âœ… Add APAC region
- âœ… Add LATAM region
- âœ… Sharding per region
- âœ… Multi-master replication

---

## âœ… ×”××œ×¦×” ×¡×•×¤×™×ª

### ××¨×›×™×˜×§×˜×•×¨×” ××•××œ×¦×ª

```
1. Database per Region (PostgreSQL)
   â”œâ”€ IL: gogobe_il (4 shards)
   â”œâ”€ US: gogobe_us (16 shards)
   â””â”€ EU: gogobe_eu (8 shards)

2. Global Master Database (CockroachDB)
   â””â”€ master_products, categories, users

3. Analytics Database (ClickHouse)
   â””â”€ events, trends, aggregates

4. Cache Layer (Redis Cluster)
   â”œâ”€ Per region
   â””â”€ 16 nodes per cluster

5. Message Broker (Kafka)
   â”œâ”€ Multi-region replication
   â””â”€ 3 brokers per region
```

---

**××•×›×Ÿ ×œ×›×‘×•×© ××ª ×”×¢×•×œ×?** ğŸŒğŸš€
