<!DOCTYPE html>
<html dir="rtl" lang="he">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gogobe - × ×™×”×•×œ ×§×˜×’×•×¨×™×•×ª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 30px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .nav {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav a {
            padding: 8px 16px;
            background: #f59e0b;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.3s;
        }

        .nav a:hover {
            background: #d97706;
            transform: translateY(-2px);
        }

        .nav a.active {
            background: #d97706;
        }

        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #f59e0b;
        }

        .tree-view {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .tree-item {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tree-item.level-0 {
            font-weight: bold;
            color: #f59e0b;
            font-size: 16px;
        }

        .tree-item.level-1 {
            padding-right: 30px;
            color: #333;
        }

        .tree-item.level-2 {
            padding-right: 60px;
            color: #666;
        }

        .tree-item.level-3 {
            padding-right: 90px;
            color: #999;
        }

        .problem-box {
            background: #fee2e2;
            border-right: 5px solid #dc2626;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .problem-box h3 {
            color: #dc2626;
            margin-bottom: 15px;
        }

        .problem-box ul {
            list-style: none;
            padding: 0;
        }

        .problem-box li {
            padding: 8px 0;
            border-bottom: 1px solid #fecaca;
        }

        .problem-box li:last-child {
            border-bottom: none;
        }

        .solution-box {
            background: #d1fae5;
            border-right: 5px solid #10b981;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .solution-box h3 {
            color: #10b981;
            margin-bottom: 15px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #f59e0b;
        }

        .feature-card .icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .feature-card h3 {
            color: #f59e0b;
            margin-bottom: 10px;
        }

        .feature-card p {
            color: #666;
            font-size: 14px;
        }

        .code-block {
            background: #2d3436;
            color: #dfe6e9;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            direction: ltr;
            text-align: left;
            margin: 20px 0;
        }

        .api-endpoint {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-right: 4px solid #f59e0b;
        }

        .api-endpoint .method {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 6px;
            font-weight: bold;
            margin-left: 10px;
            font-size: 12px;
        }

        .method.get {
            background: #10b981;
            color: white;
        }

        .method.post {
            background: #3b82f6;
            color: white;
        }

        .method.put {
            background: #f59e0b;
            color: white;
        }

        .method.delete {
            background: #ef4444;
            color: white;
        }

        .api-endpoint .path {
            font-family: 'Courier New', monospace;
            color: #333;
            font-size: 14px;
        }

        .api-endpoint .description {
            color: #666;
            font-size: 13px;
            margin-top: 8px;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>ğŸ—‚ï¸ × ×™×”×•×œ ×§×˜×’×•×¨×™×•×ª - Gogobe</h1>
        <p>××‘× ×” ×”×™×¨×¨×›×™, ×× ×™×¢×ª ×›×¤×™×œ×•×™×•×ª, ×•-LLM categorization</p>
    </div>

    <div class="nav">
        <a href="index.html">ğŸ  ×“×£ ×”×‘×™×ª</a>
        <a href="price-flow.html">ğŸ’° ×–×¨×™××ª ××—×™×¨×™×</a>
        <a href="implementation.html">ğŸ—ºï¸ ×ª×›× ×™×ª ×™×™×©×•×</a>
        <a href="categories.html" class="active">ğŸ—‚ï¸ × ×™×”×•×œ ×§×˜×’×•×¨×™×•×ª</a>
        <a href="microservices-documentation.html">ğŸ”§ Microservices</a>
        <a href="../frontend/index.html">ğŸ” ×—×–×¨×” ×œ××ª×¨</a>
    </div>

    <div class="container">
        <!-- Problems -->
        <div class="section">
            <h2>âŒ ×”×‘×¢×™×•×ª ×©×–×™×”×™× ×•</h2>

            <div class="problem-box">
                <h3>ğŸš¨ ×‘×¢×™×•×ª ×§×™×™××•×ª ×‘××¢×¨×›×ª</h3>
                <ul>
                    <li><strong>×›×¤×™×œ×•×™×•×ª:</strong> ××•×ª×” ×§×˜×’×•×¨×™×” ×‘×©××•×ª ×©×•× ×™× ("×—×œ×‘" vs "××•×¦×¨×™ ×—×œ×‘" vs "Milk")</li>
                    <li><strong>××™×Ÿ ×”×™×¨×¨×›×™×”:</strong> ×œ× ×‘×¨×•×¨ ××™ ××‘ ×•××™ ×‘×Ÿ</li>
                    <li><strong>××™×Ÿ ×¡×˜× ×“×¨×˜×™×–×¦×™×”:</strong> ×©××•×ª ×œ× ××—×™×“×™×</li>
                    <li><strong>×§×©×” ×œ× ×•×•×˜:</strong> ××™×Ÿ ××‘× ×” ×¢×¥ ×‘×¨×•×¨</li>
                    <li><strong>×‘×œ××’×Ÿ:</strong> ××•×¦×¨×™× ×‘×§×˜×’×•×¨×™×•×ª ×œ× × ×›×•× ×•×ª</li>
                </ul>
            </div>

            <div style="background: #fff7ed; padding: 20px; border-radius: 10px; margin-top: 20px;">
                <h3 style="color: #f59e0b; margin-bottom: 15px;">×“×•×’××” ×œ×‘×¢×™×”:</h3>
                <div class="tree-view">
                    <div class="tree-item level-0">âŒ ××–×•×Ÿ (500 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-0">âŒ Food (200 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-0">âŒ ××•×¦×¨×™ ××–×•×Ÿ (150 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-1">âŒ ×—×œ×‘ (100 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-1">âŒ ××•×¦×¨×™ ×—×œ×‘ (80 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-1">âŒ Milk (50 ××•×¦×¨×™×)</div>
                </div>
                <p style="color: #f59e0b; margin-top: 15px; font-weight: bold;">
                    â† ×›×œ ××œ×” ×¦×¨×™×›×™× ×œ×”×™×•×ª ×§×˜×’×•×¨×™×” ××—×ª!
                </p>
            </div>
        </div>

        <!-- Solution -->
        <div class="section">
            <h2>âœ… ×”×¤×ª×¨×•×Ÿ</h2>

            <div class="solution-box">
                <h3>ğŸ¯ ××¢×¨×›×ª ×§×˜×’×•×¨×™×•×ª ×—×›××”</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="padding: 8px 0; border-bottom: 1px solid #a7f3d0;">
                        âœ… <strong>××‘× ×” ××‘-×‘×Ÿ:</strong> ×¢×¥ ×”×™×¨×¨×›×™ ×‘×¨×•×¨
                    </li>
                    <li style="padding: 8px 0; border-bottom: 1px solid #a7f3d0;">
                        âœ… <strong>×× ×™×¢×ª ×›×¤×™×œ×•×™×•×ª:</strong> Aliases + Merge
                    </li>
                    <li style="padding: 8px 0; border-bottom: 1px solid #a7f3d0;">
                        âœ… <strong>×¡×˜× ×“×¨×˜×™×–×¦×™×”:</strong> ×©××•×ª ××—×™×“×™×
                    </li>
                    <li style="padding: 8px 0; border-bottom: 1px solid #a7f3d0;">
                        âœ… <strong>LLM Categorization:</strong> ××•×˜×•××˜×™
                    </li>
                    <li style="padding: 8px 0;">
                        âœ… <strong>Audit Trail:</strong> ×”×™×¡×˜×•×¨×™×” ××œ××”
                    </li>
                </ul>
            </div>

            <div style="background: #f0fdf4; padding: 20px; border-radius: 10px; margin-top: 20px;">
                <h3 style="color: #10b981; margin-bottom: 15px;">×“×•×’××” × ×›×•× ×”:</h3>
                <div class="tree-view">
                    <div class="tree-item level-0">âœ… Food & Beverages (1000 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-1">â””â”€ Dairy (300 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-2"> â””â”€ Milk (150 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-3"> â”œâ”€ Fresh Milk (80 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-3"> â”œâ”€ UHT Milk (40 ××•×¦×¨×™×)</div>
                    <div class="tree-item level-3"> â””â”€ Organic Milk (30 ××•×¦×¨×™×)</div>
                </div>
                <p style="color: #10b981; margin-top: 15px; font-weight: bold;">
                    â† ××‘× ×” ×‘×¨×•×¨ ×•×¡×“×•×¨!
                </p>
            </div>
        </div>

        <!-- Features -->
        <div class="section">
            <h2>ğŸ¨ ×ª×›×•× ×•×ª</h2>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="icon">ğŸŒ³</div>
                    <h3>××‘× ×” ××‘-×‘×Ÿ</h3>
                    <p>×¢×¥ ×”×™×¨×¨×›×™ ×¢×“ 5 ×¨××•×ª ×¢×•××§</p>
                </div>

                <div class="feature-card">
                    <div class="icon">ğŸ”</div>
                    <h3>×–×™×”×•×™ ×›×¤×™×œ×•×™×•×ª</h3>
                    <p>Levenshtein distance + LLM verification</p>
                </div>

                <div class="feature-card">
                    <div class="icon">ğŸ”—</div>
                    <h3>Merge ×§×˜×’×•×¨×™×•×ª</h3>
                    <p>××™×—×•×“ ××•×˜×•××˜×™ ×¢× audit trail</p>
                </div>

                <div class="feature-card">
                    <div class="icon">ğŸ¤–</div>
                    <h3>LLM Categorization</h3>
                    <p>×§×˜×’×•×¨×™×–×¦×™×” ××•×˜×•××˜×™×ª ×©×œ ××•×¦×¨×™×</p>
                </div>

                <div class="feature-card">
                    <div class="icon">ğŸ·ï¸</div>
                    <h3>Aliases</h3>
                    <p>×©××•×ª ×—×œ×•×¤×™×™× ×‘×©×¤×•×ª ×©×•× ×•×ª</p>
                </div>

                <div class="feature-card">
                    <div class="icon">ğŸ“Š</div>
                    <h3>×¡×¤×™×¨×ª ××•×¦×¨×™×</h3>
                    <p>×¢×“×›×•×Ÿ ××•×˜×•××˜×™ ×©×œ product_count</p>
                </div>
            </div>
        </div>

        <!-- Database Schema -->
        <div class="section">
            <h2>ğŸ—„ï¸ Database Schema</h2>

            <div class="code-block">CREATE TABLE categories (
                id BIGSERIAL PRIMARY KEY,

                -- Basic Info
                name VARCHAR(200) NOT NULL,
                name_en VARCHAR(200),
                slug VARCHAR(200) UNIQUE NOT NULL,

                -- Hierarchy
                parent_id BIGINT REFERENCES categories(id),
                level INT NOT NULL DEFAULT 0,
                path VARCHAR(500), -- "Food & Beverages > Dairy > Milk"

                -- Metadata
                description TEXT,
                icon VARCHAR(50),
                color VARCHAR(7),

                -- Stats
                product_count INT DEFAULT 0,
                is_active BOOLEAN DEFAULT TRUE,

                -- Timestamps
                created_at TIMESTAMP DEFAULT NOW(),
                updated_at TIMESTAMP DEFAULT NOW(),

                CONSTRAINT unique_name_per_parent UNIQUE(parent_id, name)
                );

                -- Aliases for duplicate detection
                CREATE TABLE category_aliases (
                id BIGSERIAL PRIMARY KEY,
                category_id BIGINT REFERENCES categories(id),
                alias VARCHAR(200) NOT NULL,
                language VARCHAR(5),
                created_at TIMESTAMP DEFAULT NOW(),
                UNIQUE(alias, language)
                );

                -- Merge history for audit
                CREATE TABLE category_merge_history (
                id BIGSERIAL PRIMARY KEY,
                source_category_id BIGINT,
                target_category_id BIGINT REFERENCES categories(id),
                source_name VARCHAR(200),
                product_count INT,
                merged_by VARCHAR(100),
                merged_at TIMESTAMP DEFAULT NOW()
                );</div>
        </div>

        <!-- API Endpoints -->
        <div class="section">
            <h2>ğŸ”Œ API Endpoints</h2>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="path">/api/categories</span>
                <div class="description">×§×‘×œ ××ª ×›×œ ×”×§×˜×’×•×¨×™×•×ª (××‘× ×” ×¢×¥)</div>
            </div>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="path">/api/categories/{id}</span>
                <div class="description">×§×‘×œ ×§×˜×’×•×¨×™×” ×¡×¤×¦×™×¤×™×ª</div>
            </div>

            <div class="api-endpoint">
                <span class="method post">POST</span>
                <span class="path">/api/categories</span>
                <div class="description">×¦×•×¨ ×§×˜×’×•×¨×™×” ×—×“×©×”</div>
                <div class="code-block" style="margin-top: 10px; padding: 10px; font-size: 12px;">{
                    "name": "Organic Milk",
                    "parent_id": 123,
                    "description": "Organic dairy products"
                    }</div>
            </div>

            <div class="api-endpoint">
                <span class="method put">PUT</span>
                <span class="path">/api/categories/{id}</span>
                <div class="description">×¢×“×›×Ÿ ×§×˜×’×•×¨×™×”</div>
            </div>

            <div class="api-endpoint">
                <span class="method delete">DELETE</span>
                <span class="path">/api/categories/{id}</span>
                <div class="description">××—×§ ×§×˜×’×•×¨×™×” (××¢×‘×™×¨ ××•×¦×¨×™× ×œ××‘)</div>
            </div>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="path">/api/categories/duplicates</span>
                <div class="description">××¦× ×§×˜×’×•×¨×™×•×ª ×›×¤×•×œ×•×ª</div>
            </div>

            <div class="api-endpoint">
                <span class="method post">POST</span>
                <span class="path">/api/categories/merge</span>
                <div class="description">××–×’ ×©×ª×™ ×§×˜×’×•×¨×™×•×ª</div>
                <div class="code-block" style="margin-top: 10px; padding: 10px; font-size: 12px;">{
                    "source_id": 456,
                    "target_id": 123,
                    "dry_run": false
                    }</div>
            </div>

            <div class="api-endpoint">
                <span class="method post">POST</span>
                <span class="path">/api/categories/auto-categorize</span>
                <div class="description">×§×˜×’×•×¨×™×–×¦×™×” ××•×˜×•××˜×™×ª ×¢× LLM</div>
                <div class="code-block" style="margin-top: 10px; padding: 10px; font-size: 12px;">{
                    "product_name": "×—×œ×‘ ×ª× ×•×‘×” 3%"
                    }</div>
            </div>
        </div>

        <!-- LLM Example -->
        <div class="section">
            <h2>ğŸ¤– LLM Categorization - ×“×•×’××”</h2>

            <div style="background: #f3e5f5; padding: 20px; border-radius: 10px; border-right: 5px solid #7b1fa2;">
                <h3 style="color: #7b1fa2; margin-bottom: 15px;">Input:</h3>
                <div class="code-block">Product: "×—×œ×‘ ×ª× ×•×‘×” 3% 1 ×œ×™×˜×¨"</div>

                <h3 style="color: #7b1fa2; margin: 20px 0 15px;">LLM Response:</h3>
                <div class="code-block">{
                    "category_path": "Food & Beverages > Dairy > Milk > Fresh Milk",
                    "confidence": 0.98,
                    "is_new_category": false,
                    "reasoning": "This is clearly a fresh milk product based on the 3% fat content and 1L volume"
                    }</div>

                <h3 style="color: #7b1fa2; margin: 20px 0 15px;">Result:</h3>
                <p style="color: #666;">×”××•×¦×¨ ××§×•×©×¨ ××•×˜×•××˜×™×ª ×œ×§×˜×’×•×¨×™×” ×”× ×›×•× ×”! âœ…</p>
            </div>
        </div>

        <!-- Summary -->
        <div class="section"
            style="background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%); border-right: 5px solid #f59e0b;">
            <h2 style="color: #f59e0b;">ğŸ“‹ ×¡×™×›×•×</h2>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div>
                    <h3 style="margin-bottom: 15px;">×œ×¤× ×™:</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 8px 0; color: #dc2626;">âŒ ×›×¤×™×œ×•×™×•×ª</li>
                        <li style="padding: 8px 0; color: #dc2626;">âŒ ×‘×œ××’×Ÿ</li>
                        <li style="padding: 8px 0; color: #dc2626;">âŒ ××™×Ÿ ×”×™×¨×¨×›×™×”</li>
                        <li style="padding: 8px 0; color: #dc2626;">âŒ ×§×©×” ×œ× ×•×•×˜</li>
                    </ul>
                </div>

                <div>
                    <h3 style="margin-bottom: 15px;">××—×¨×™:</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 8px 0; color: #10b981;">âœ… ××‘× ×” ×‘×¨×•×¨</li>
                        <li style="padding: 8px 0; color: #10b981;">âœ… ××¤×¡ ×›×¤×™×œ×•×™×•×ª</li>
                        <li style="padding: 8px 0; color: #10b981;">âœ… ×¢×¥ ×”×™×¨×¨×›×™</li>
                        <li style="padding: 8px 0; color: #10b981;">âœ… LLM ××•×˜×•××˜×™</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>

</html>